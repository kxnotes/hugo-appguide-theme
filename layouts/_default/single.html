{{ define "main" }}
{{ if eq .Section "guides" }}
<!-- æ•™ç¨‹æ–‡ç« å¸ƒå±€ -->
<div class="article-main">
    <div class="container">
        <!-- é¢åŒ…å±‘å¯¼èˆª -->
        <nav class="breadcrumb">
            <a href="/">é¦–é¡µ</a>
            <span class="separator">â€º</span>
            <a href="/{{ .Section }}/">{{ .Section | title }}</a>
            <span class="separator">â€º</span>
            <span class="current">{{ .Title }}</span>
        </nav>

        <div class="article-layout">
            <!-- æ–‡ç« å†…å®¹ -->
            <article class="article-content">
                <!-- æ–‡ç« å¤´éƒ¨ -->
                <header class="article-header">
                    <div class="article-meta">
                        {{ with .Params.categories }}
                        <span class="category-badge {{ index . 0 | lower | replaceRE "[^a-z0-9]+" "-" }}">{{ index . 0 }}</span>
                        {{ end }}
                        <span class="read-time">â±ï¸ é¢„è®¡é˜…è¯»æ—¶é—´ï¼š{{ .ReadingTime }} åˆ†é’Ÿ</span>
                    </div>
                    <h1>{{ .Title }}</h1>
                    <div class="article-info">
                        <span class="publish-date">å‘å¸ƒæ—¥æœŸï¼š{{ .Date.Format "2006-01-02" }}</span>
                        {{ with .Params.difficulty }}
                        <span class="difficulty">éš¾åº¦ï¼š{{ . }}</span>
                        {{ end }}
                        <span class="last-updated">æœ€åæ›´æ–°ï¼š{{ .Lastmod.Format "2006-01-02" }}</span>
                    </div>
                    {{ with .Summary }}
                    <p class="article-intro">{{ . }}</p>
                    {{ end }}
                </header>

                <!-- æ–‡ç« æ­£æ–‡ -->
                <div class="article-body">
                    {{ .Content }}
                </div>

                <!-- æ–‡ç« åº•éƒ¨ -->
                <footer class="article-footer">
                    {{ with .Params.tags }}
                    <div class="article-tags">
                        {{ range . }}
                        <span class="tag">{{ . }}</span>
                        {{ end }}
                    </div>
                    {{ end }}
                    <div class="article-actions">
                        <button class="action-btn" onclick="window.print()">
                            <span>ğŸ–¨ï¸</span> æ‰“å°æ•™ç¨‹
                        </button>
                        <button class="action-btn" onclick="copyArticleLink()">
                            <span>ğŸ”—</span> å¤åˆ¶é“¾æ¥
                        </button>
                    </div>
                </footer>
            </article>

            <!-- ä¾§è¾¹æ ç›®å½• -->
            <aside class="article-sidebar">
                {{ partial "toc.html" . }}
                {{ partial "related-articles.html" . }}
            </aside>
        </div>
    </div>
</div>
{{ else }}
<!-- é€šç”¨å•é¡µé¢å¸ƒå±€ -->
<div class="main-content">
    <div class="container">
        <div class="page-header">
            <h1>{{ .Title }}</h1>
            {{ with .Description }}
            <p class="page-subtitle">{{ . }}</p>
            {{ end }}
        </div>
        
        <div class="page-content">
            {{ .Content }}
        </div>
    </div>
</div>
{{ end }}
{{ end }}

{{ define "scripts" }}
{{ if eq .Section "guides" }}
{{ $articleScript := resources.Get "js/article.js" | resources.Minify }}
<script src="{{ $articleScript.Permalink }}"></script>
{{ end }}
{{ end }}