{{ define "main" }}
<div class="pt-20 min-h-screen">
    <div class="max-w-6xl mx-auto px-5">
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">{{ .Title | default "ä¸‹è½½" }} {{ .Site.Params.app.name }}</h1>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto">{{ .Description | default "é€‰æ‹©é€‚åˆæ‚¨è®¾å¤‡çš„ç‰ˆæœ¬ï¼Œå¼€å§‹å®‰å…¨çš„ç½‘ç»œä½“éªŒ" }}</p>
        </div>

        <!-- å®‰å…¨æç¤º -->
        <div class="warning-box mb-12 flex items-start space-x-4">
            <div class="text-3xl flex-shrink-0">âš ï¸</div>
            <div>
                <h3 class="text-warning-800 text-xl font-semibold mb-2">å®‰å…¨æç¤º</h3>
                <p class="text-warning-700">ä¸ºç¡®ä¿æ‚¨çš„å®‰å…¨ï¼Œæœ¬ç«™æ‰€æœ‰ä¸‹è½½é“¾æ¥å‡ç›´æ¥æŒ‡å‘ {{ .Site.Params.app.name }} å®˜æ–¹ GitHub Releases é¡µé¢ã€‚æˆ‘ä»¬ç»ä¸æä¾›ä»»ä½•ä¿®æ”¹ç‰ˆæˆ–ç¬¬ä¸‰æ–¹å®‰è£…åŒ…ã€‚è¯·æ ¡éªŒæ–‡ä»¶ä»¥ç¡®ä¿å®‰å…¨ã€‚</p>
            </div>
        </div>

        <!-- ä¸‹è½½è¡¨æ ¼ -->
        <div class="mb-16">
            <div class="download-table">
                <div class="table-header hidden md:grid">
                    <div>æ“ä½œç³»ç»Ÿ</div>
                    <div>æœ€æ–°ç‰ˆæœ¬</div>
                    <div>æ›´æ–°æ—¥æœŸ</div>
                    <div>ä¸‹è½½é“¾æ¥</div>
                    <div>æ ¡éªŒå’Œ</div>
                </div>

                {{ range .Site.Params.downloads.platforms }}
                <div class="table-row">
                    <div class="col-platform">
                        <div class="platform-info">
                            <span class="platform-icon">{{ .icon }}</span>
                            <div>
                                <div class="font-semibold text-gray-900">{{ .name }}</div>
                                <div class="text-sm text-gray-600">{{ .description }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-version">
                        {{ if eq .status "coming_soon" }}
                        <span class="version-badge coming-soon">å³å°†æ¨å‡º</span>
                        {{ else }}
                        <span class="version-badge">{{ $.Site.Params.downloads.latest_version }}</span>
                        {{ end }}
                    </div>
                    <div class="col-date text-gray-600">
                        {{ if eq .status "coming_soon" }}
                        -
                        {{ else }}
                        {{ $.Site.Params.downloads.release_date }}
                        {{ end }}
                    </div>
                    <div class="col-download">
                        <div class="download-buttons">
                            {{ range .files }}
                            {{ if eq .type "play" }}
                            <a href="https://play.google.com/store/apps/details?id=app.hiddify.com" class="download-btn secondary" target="_blank">{{ .label }}</a>
                            {{ else if eq .type "appstore" }}
                            <a href="https://apps.apple.com/app/hiddify/id6596777532" class="download-btn primary" target="_blank">{{ .label }}</a>
                            {{ else }}
                            <a href="{{ $.Site.Params.app.github }}/releases/latest" class="download-btn primary" target="_blank">{{ .label }}</a>
                            {{ end }}
                            {{ end }}
                        </div>
                    </div>
                    <div class="col-checksum">
                        {{ if ne .status "coming_soon" }}
                        <button class="btn-secondary text-sm" onclick="showChecksum('{{ .name | lower | replaceRE "[^a-z0-9]+" "-" }}')">SHA256</button>
                        {{ else }}
                        <span class="text-gray-400">-</span>
                        {{ end }}
                    </div>
                </div>
                {{ end }}
            </div>
        </div>

        <!-- å®‰è£…è¯´æ˜ -->
        <div class="mb-16">
            <h2 class="text-3xl font-bold text-center text-gray-900 mb-8">å®‰è£…è¯´æ˜</h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="card">
                    <div class="card-body">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">ğŸ–¥ï¸ Windows ç”¨æˆ·</h3>
                        <ul class="space-y-2 text-gray-600">
                            <li class="flex items-start">
                                <span class="text-primary-500 mr-2">â€¢</span>
                                ä¸‹è½½ .exe æ–‡ä»¶ç›´æ¥å®‰è£…ï¼Œæˆ–ä¸‹è½½ .zip æ–‡ä»¶è§£å‹ä½¿ç”¨
                            </li>
                            <li class="flex items-start">
                                <span class="text-primary-500 mr-2">â€¢</span>
                                é¦–æ¬¡è¿è¡Œæ—¶ï¼ŒWindows Defender å¯èƒ½ä¼šæç¤ºï¼Œè¯·é€‰æ‹©"å…è®¸"
                            </li>
                            <li class="flex items-start">
                                <span class="text-primary-500 mr-2">â€¢</span>
                                å»ºè®®ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œä»¥è·å¾—æœ€ä½³ä½“éªŒ
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">ğŸ macOS ç”¨æˆ·</h3>
                        <ul class="space-y-2 text-gray-600">
                            <li class="flex items-start">
                                <span class="text-primary-500 mr-2">â€¢</span>
                                ä¸‹è½½å¯¹åº”èŠ¯ç‰‡ç‰ˆæœ¬çš„ .dmg æ–‡ä»¶
                            </li>
                            <li class="flex items-start">
                                <span class="text-primary-500 mr-2">â€¢</span>
                                é¦–æ¬¡æ‰“å¼€æ—¶éœ€è¦åœ¨"ç³»ç»Ÿåå¥½è®¾ç½® > å®‰å…¨æ€§ä¸éšç§"ä¸­å…è®¸
                            </li>
                            <li class="flex items-start">
                                <span class="text-primary-500 mr-2">â€¢</span>
                                Apple Silicon ç‰ˆæœ¬æ€§èƒ½æ›´ä¼˜ï¼ŒIntel ç‰ˆæœ¬å…¼å®¹æ€§æ›´å¥½
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">ğŸ“± Android ç”¨æˆ·</h3>
                        <ul class="space-y-2 text-gray-600">
                            <li class="flex items-start">
                                <span class="text-primary-500 mr-2">â€¢</span>
                                æ¨èä» Google Play ä¸‹è½½ï¼Œæ›´æ–°æ›´åŠæ—¶
                            </li>
                            <li class="flex items-start">
                                <span class="text-primary-500 mr-2">â€¢</span>
                                GitHub ç‰ˆæœ¬å¯èƒ½éœ€è¦å¼€å¯"æœªçŸ¥æ¥æº"å®‰è£…æƒé™
                            </li>
                            <li class="flex items-start">
                                <span class="text-primary-500 mr-2">â€¢</span>
                                æ”¯æŒ Android 7.0 åŠä»¥ä¸Šç‰ˆæœ¬
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- è‡ªå®šä¹‰å†…å®¹ -->
        {{ .Content }}
    </div>
</div>

<!-- æ ¡éªŒå’Œå¼¹çª— -->
<div id="checksumModal" class="modal flex items-center justify-center p-4">
    <div class="modal-content">
        <div class="flex justify-between items-center p-6 border-b border-gray-200">
            <h3 class="text-xl font-semibold text-gray-900">æ–‡ä»¶æ ¡éªŒå’Œ</h3>
            <button class="text-gray-400 hover:text-gray-600 text-2xl font-bold" onclick="closeModal()">&times;</button>
        </div>
        <div id="checksumContent" class="p-6"></div>
    </div>
</div>
{{ end }}

{{ define "scripts" }}
{{ $downloadScript := resources.Get "js/download.js" | resources.Minify }}
<script src="{{ $downloadScript.Permalink }}"></script>
{{ end }}