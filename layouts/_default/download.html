{{ define "structured_data" }}
{{ partial "download-structured-data.html" . }}
{{ end }}

{{ define "main" }}
<div class="pt-24 min-h-screen">
    <div class="max-w-6xl mx-auto px-5">
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">{{ .Title | default "ä¸‹è½½" }} {{ .Site.Params.app.name }}</h1>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto">{{ .Description | default "é€‰æ‹©é€‚åˆæ‚¨è®¾å¤‡çš„ç‰ˆæœ¬ï¼Œå¼€å§‹å®‰å…¨çš„ç½‘ç»œä½“éªŒ" }}</p>
        </div>

        <!-- å®‰å…¨æç¤º -->
        <div class="bg-gradient-to-r from-yellow-50 to-yellow-100 border-2 border-yellow-400 rounded-2xl p-8 mb-12 flex items-start gap-4">
            <div class="text-3xl flex-shrink-0">âš ï¸</div>
            <div>
                <h3 class="text-yellow-800 text-xl font-semibold mb-2">å®‰å…¨æç¤º</h3>
                <p class="text-yellow-700 leading-relaxed m-0">ä¸ºç¡®ä¿æ‚¨çš„å®‰å…¨ï¼Œæœ¬ç«™æ‰€æœ‰ä¸‹è½½é“¾æ¥å‡ç›´æ¥æŒ‡å‘ {{ .Site.Params.app.name }} å®˜æ–¹ GitHub Releases é¡µé¢ã€‚æˆ‘ä»¬ç»ä¸æä¾›ä»»ä½•ä¿®æ”¹ç‰ˆæˆ–ç¬¬ä¸‰æ–¹å®‰è£…åŒ…ã€‚è¯·æ ¡éªŒæ–‡ä»¶ä»¥ç¡®ä¿å®‰å…¨ã€‚</p>
            </div>
        </div>

        <!-- ä¸‹è½½è¡¨æ ¼ -->
        <div class="mb-16">
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="bg-blue-600 text-white p-6 grid grid-cols-5 gap-4 font-semibold hidden md:grid">
                    <div>æ“ä½œç³»ç»Ÿ</div>
                    <div>æœ€æ–°ç‰ˆæœ¬</div>
                    <div>æ›´æ–°æ—¥æœŸ</div>
                    <div>ä¸‹è½½é“¾æ¥</div>
                    <div>æ ¡éªŒå’Œ</div>
                </div>

                {{ range .Site.Params.downloads.platforms }}
                <div class="p-6 grid grid-cols-1 md:grid-cols-5 gap-4 items-center border-b border-gray-100 hover:bg-gray-50 transition-colors duration-300 last:border-b-0">
                    <div class="flex justify-between items-center py-2 border-b border-gray-100 md:border-b-0 md:block">
                        <span class="font-semibold text-gray-700 md:hidden">å¹³å°:</span>
                        <div class="flex items-center space-x-4">
                            <span class="text-3xl">{{ .icon }}</span>
                            <div>
                                <div class="font-semibold text-gray-900">{{ .name }}</div>
                                <div class="text-sm text-gray-600">{{ .description }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-between items-center py-2 border-b border-gray-100 md:border-b-0 md:block">
                        <span class="font-semibold text-gray-700 md:hidden">ç‰ˆæœ¬:</span>
                        {{ if eq .status "coming_soon" }}
                        <span class="bg-gray-500 text-white px-3 py-1 rounded-full text-sm font-medium">å³å°†å‘å¸ƒ</span>
                        {{ else if .version }}
                        <span class="bg-emerald-500 text-white px-3 py-1 rounded-full text-sm font-medium">{{ .version }}</span>
                        {{ else }}
                        <span class="bg-emerald-500 text-white px-3 py-1 rounded-full text-sm font-medium">{{ $.Site.Params.downloads.latest_version }}</span>
                        {{ end }}
                    </div>
                    <div class="flex justify-between items-center py-2 border-b border-gray-100 md:border-b-0 md:block text-gray-600">
                        <span class="font-semibold text-gray-700 md:hidden">æ—¥æœŸ:</span>
                        {{ if eq .status "coming_soon" }}
                        -
                        {{ else }}
                        {{ $.Site.Params.downloads.release_date }}
                        {{ end }}
                    </div>
                    <div class="flex justify-between items-center py-2 border-b border-gray-100 md:border-b-0 md:block">
                        <span class="font-semibold text-gray-700 md:hidden">ä¸‹è½½:</span>
                        <div class="flex flex-wrap gap-2">
                            {{ range .files }}
                            {{ if eq .type "play" }}
                            <a href="https://play.google.com/store/apps/details?id=app.hiddify.com" class="px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:-translate-y-0.5 bg-gray-200 text-gray-700 hover:bg-gray-300" target="_blank">{{ .label }}</a>
                            {{ else if eq .type "appstore" }}
                            <a href="https://apps.apple.com/app/hiddify/id6596777532" class="px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:-translate-y-0.5 bg-blue-600 text-white hover:bg-blue-700 shadow-md hover:shadow-lg" target="_blank">{{ .label }}</a>
                            {{ else if eq .type "ipa" }}
                            <a href="{{ $.Site.Params.app.github }}/releases/latest" class="px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:-translate-y-0.5 bg-gray-200 text-gray-700 hover:bg-gray-300" target="_blank">{{ .label }}</a>
                            {{ else }}
                            <a href="{{ $.Site.Params.app.github }}/releases/latest" class="px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:-translate-y-0.5 bg-blue-600 text-white hover:bg-blue-700 shadow-md hover:shadow-lg" target="_blank">{{ .label }}</a>
                            {{ end }}
                            {{ end }}
                        </div>
                    </div>
                    <div class="flex justify-between items-center py-2 md:border-b-0">
                        <span class="font-semibold text-gray-700 md:hidden">æ ¡éªŒ:</span>
                        {{ if ne .status "coming_soon" }}
                        <button class="bg-gray-100 border border-gray-300 text-gray-600 px-4 py-2 rounded-lg cursor-pointer text-sm transition-all duration-300 hover:bg-gray-200 hover:border-gray-400" onclick="showChecksum('{{ .name | lower | replaceRE `[^a-z0-9]+` `-` | replaceRE `apple-silicon|intel` `universal` }}')">SHA256</button>
                        {{ else }}
                        <span class="text-gray-400">-</span>
                        {{ end }}
                    </div>
                </div>
                {{ end }}
            </div>
        </div>

        <!-- å®‰è£…è¯´æ˜ -->
        <div class="mb-16">
            <h2 class="text-3xl font-bold text-center text-gray-900 mb-8">å®‰è£…è¯´æ˜</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 border border-gray-100">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">ğŸ–¥ï¸ Windows ç”¨æˆ·</h3>
                        <ul class="space-y-2 text-gray-600">
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                ä¸‹è½½ .exe æ–‡ä»¶ç›´æ¥å®‰è£…ï¼Œæˆ–ä¸‹è½½ .zip æ–‡ä»¶è§£å‹ä½¿ç”¨
                            </li>
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                é¦–æ¬¡è¿è¡Œæ—¶ï¼ŒWindows Defender å¯èƒ½ä¼šæç¤ºï¼Œè¯·é€‰æ‹©"å…è®¸"
                            </li>
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                å»ºè®®ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œä»¥è·å¾—æœ€ä½³ä½“éªŒ
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 border border-gray-100">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">ğŸ macOS ç”¨æˆ·</h3>
                        <ul class="space-y-2 text-gray-600">
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                ä¸‹è½½å¯¹åº”èŠ¯ç‰‡ç‰ˆæœ¬çš„ .dmg æˆ– .pkg æ–‡ä»¶
                            </li>
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                .dmg æ–‡ä»¶ï¼šåŒå‡»å®‰è£…ï¼Œæ‹–æ‹½åˆ°åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹
                            </li>
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                .pkg æ–‡ä»¶ï¼šåŒå‡»è¿è¡Œå®‰è£…ç¨‹åºï¼ŒæŒ‰ç…§å‘å¯¼å®Œæˆå®‰è£…
                            </li>
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                é¦–æ¬¡æ‰“å¼€æ—¶éœ€è¦åœ¨"ç³»ç»Ÿåå¥½è®¾ç½® > å®‰å…¨æ€§ä¸éšç§"ä¸­å…è®¸
                            </li>
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                Universal ç‰ˆæœ¬å…¼å®¹æ‰€æœ‰ Mac è®¾å¤‡ï¼ˆIntel å’Œ Apple Siliconï¼‰
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 border border-gray-100">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">ğŸ“± Android ç”¨æˆ·</h3>
                        <ul class="space-y-2 text-gray-600">
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                æ¨èä» Google Play ä¸‹è½½ï¼Œæ›´æ–°æ›´åŠæ—¶
                            </li>
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                GitHub ç‰ˆæœ¬å¯èƒ½éœ€è¦å¼€å¯"æœªçŸ¥æ¥æº"å®‰è£…æƒé™
                            </li>
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                æ”¯æŒ Android 7.0 åŠä»¥ä¸Šç‰ˆæœ¬
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 border border-gray-100">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">ğŸ“± iOS ç”¨æˆ·</h3>
                        <ul class="space-y-2 text-gray-600">
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                æ¨èä» App Store ä¸‹è½½ï¼Œå®‰å…¨ä¸”è‡ªåŠ¨æ›´æ–°
                            </li>
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                .ipa åŒ…é€‚ç”¨äºä¾§è½½å®‰è£…ï¼Œéœ€è¦ä½¿ç”¨ AltStoreã€Sideloadly ç­‰å·¥å…·
                            </li>
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                ä¾§è½½å®‰è£…éœ€è¦ä¸€å®šæŠ€æœ¯åŸºç¡€ï¼Œå…è´¹ Apple ID æ¯ 7 å¤©éœ€é‡æ–°å®‰è£…
                            </li>
                            <li class="flex items-start">
                                <span class="text-blue-600 mr-2">â€¢</span>
                                æ”¯æŒ iOS 15.0 åŠä»¥ä¸Šç‰ˆæœ¬
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç‰ˆæœ¬ä¿¡æ¯å¡ç‰‡ -->
        <div class="bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-2xl p-8 mb-8">
            <div class="flex items-center justify-center gap-4 mb-6">
                <span class="text-4xl">ğŸ“¦</span>
                <h2 class="text-2xl font-bold text-green-900">å½“å‰ç‰ˆæœ¬ä¿¡æ¯</h2>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8 text-center">
                <div>
                    <h3 class="text-lg font-semibold text-green-900 mb-3">æœ€æ–°ç‰ˆæœ¬</h3>
                    <div class="text-3xl font-bold text-green-700 mb-2">{{ .Site.Params.downloads.latest_version }}</div>
                    <p class="text-green-600">ç¨³å®šç‰ˆæœ¬</p>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold text-green-900 mb-3">å‘å¸ƒæ—¥æœŸ</h3>
                    <div class="text-3xl font-bold text-green-700 mb-2">{{ .Site.Params.downloads.release_date }}</div>
                    <p class="text-green-600">æœ€åæ›´æ–°</p>
                </div>
            </div>
            
            <!-- <div class="text-center mt-6">
                <a href="{{ .Site.Params.app.github }}/releases/latest" target="_blank" rel="noopener" class="inline-block bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300 hover:-translate-y-1 shadow-md hover:shadow-lg">
                    æŸ¥çœ‹å®Œæ•´æ›´æ–°æ—¥å¿—
                </a>
            </div> -->
        </div>

        <!-- ç‰ˆæœ¬è¯´æ˜ä¸æ›´æ–°å†…å®¹ -->
        <div class="prose prose-lg max-w-none mx-auto bg-white rounded-2xl p-8 shadow-lg border border-gray-100">
            {{ .Content }}
        </div>
    </div>
</div>

<!-- æ ¡éªŒå’Œå¼¹çª— -->
<div id="checksumModal" class="fixed inset-0 z-50 hidden bg-black/50 backdrop-blur-sm flex items-center justify-center p-4">
    <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
        <div class="flex justify-between items-center p-6 border-b border-gray-200">
            <h3 class="text-xl font-semibold text-gray-900">æ–‡ä»¶æ ¡éªŒå’Œ</h3>
            <button class="text-gray-400 hover:text-gray-600 text-2xl font-bold close">&times;</button>
        </div>
        <div id="checksumContent" class="p-6"></div>
    </div>
</div>
{{ end }}

{{ define "scripts" }}
{{ $downloadScript := resources.Get "js/download.js" }}
{{ if $downloadScript }}
  {{ $minifiedScript := $downloadScript | resources.Minify }}
  <script src="{{ $minifiedScript.Permalink }}"></script>
{{ else }}
  <script src="{{ "js/download.js" | relURL }}"></script>
{{ end }}
{{ end }}