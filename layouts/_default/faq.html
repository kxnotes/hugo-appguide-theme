{{ define "main" }}
<div class="pt-24 min-h-screen">
    <div class="max-w-6xl mx-auto px-5">
        <div class="text-center mb-12">
            <h1 class="text-3xl md:text-5xl font-bold text-gray-900 mb-4">{{ .Title }}</h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">{{ .Description }}</p>
        </div>

        <!-- 搜索框 -->
        <div class="mb-8">
            <div class="relative max-w-md mx-auto">
                <input type="text" id="faqSearchInput" placeholder="搜索问题..." class="w-full pl-4 pr-12 py-3 border-2 border-gray-200 rounded-full bg-gray-50 focus:bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-300" />
                <span class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl">🔍</span>
            </div>
        </div>

        <!-- 快速导航 -->
        <div class="flex justify-center gap-4 mb-12 flex-wrap">
            <button class="px-6 py-3 border-2 border-blue-600 bg-blue-600 text-white rounded-full cursor-pointer font-medium transition-all duration-300 category-btn active" data-category="all">全部问题</button>
            <button class="px-6 py-3 border-2 border-gray-200 bg-white text-gray-600 rounded-full cursor-pointer font-medium transition-all duration-300 hover:border-blue-600 hover:text-blue-600 category-btn" data-category="installation">安装问题</button>
            <button class="px-6 py-3 border-2 border-gray-200 bg-white text-gray-600 rounded-full cursor-pointer font-medium transition-all duration-300 hover:border-blue-600 hover:text-blue-600 category-btn" data-category="connection">连接问题</button>
            <button class="px-6 py-3 border-2 border-gray-200 bg-white text-gray-600 rounded-full cursor-pointer font-medium transition-all duration-300 hover:border-blue-600 hover:text-blue-600 category-btn" data-category="configuration">配置问题</button>
            <button class="px-6 py-3 border-2 border-gray-200 bg-white text-gray-600 rounded-full cursor-pointer font-medium transition-all duration-300 hover:border-blue-600 hover:text-blue-600 category-btn" data-category="performance">性能问题</button>
            <button class="px-6 py-3 border-2 border-gray-200 bg-white text-gray-600 rounded-full cursor-pointer font-medium transition-all duration-300 hover:border-blue-600 hover:text-blue-600 category-btn" data-category="troubleshooting">故障排除</button>
        </div>

        <!-- FAQ 内容 -->
        <div class="mb-16">
            <!-- 安装问题 -->
            <div class="mb-16 faq-section" data-category="installation">
                <h2 class="flex items-center gap-4 text-2xl md:text-3xl font-bold text-gray-900 mb-8 pb-4 border-b-2 border-gray-200">
                    <span class="text-4xl">📦</span>
                    安装问题
                </h2>
                
                <div class="bg-white border border-gray-200 rounded-lg mb-4 overflow-hidden transition-all duration-300 hover:shadow-md faq-item" data-category="installation">
                    <div class="p-6 cursor-pointer flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition-colors duration-300 faq-question">
                        <h3 class="m-0 font-semibold flex-1 pr-4">Windows Defender 一直报毒怎么办？</h3>
                        <span class="text-2xl font-bold text-gray-500 w-8 h-8 flex items-center justify-center rounded-full bg-gray-200 transition-all duration-300 toggle-icon">+</span>
                    </div>
                    <div class="max-h-0 overflow-hidden transition-all duration-300 bg-white faq-answer">
                        <div class="p-6">
                            <p class="text-gray-700 leading-relaxed mb-4">这是常见的误报问题，您可以通过以下方式解决：</p>
                            <ol class="list-decimal list-inside space-y-2 text-gray-700 mb-4">
                                <li><strong>添加到白名单：</strong>打开 Windows Defender，进入"病毒和威胁防护" > "管理设置" > "添加或删除排除项"，将 {{ .Site.Params.app.name }} 的安装目录添加到排除列表。</li>
                                <li><strong>重新下载：</strong>确保从官方 GitHub 页面下载最新版本。</li>
                                <li><strong>验证文件完整性：</strong>使用 SHA256 校验和验证下载的文件是否完整。</li>
                                <li><strong>临时关闭实时保护：</strong>在安装过程中临时关闭 Windows Defender 的实时保护功能。</li>
                            </ol>
                            <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 rounded-r-lg">
                                <p class="text-emerald-700 m-0"><strong>提示：</strong>{{ .Site.Params.app.name }} 是完全开源的软件，您可以在 GitHub 上查看源代码以确认其安全性。</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white border border-gray-200 rounded-lg mb-4 overflow-hidden transition-all duration-300 hover:shadow-md faq-item" data-category="installation">
                    <div class="p-6 cursor-pointer flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition-colors duration-300 faq-question">
                        <h3 class="m-0 font-semibold flex-1 pr-4">macOS 提示"无法打开，因为无法验证开发者"怎么办？</h3>
                        <span class="text-2xl font-bold text-gray-500 w-8 h-8 flex items-center justify-center rounded-full bg-gray-200 transition-all duration-300 toggle-icon">+</span>
                    </div>
                    <div class="max-h-0 overflow-hidden transition-all duration-300 bg-white faq-answer">
                        <div class="p-6">
                            <p class="text-gray-700 leading-relaxed mb-4">这是 macOS 的安全机制，解决方法如下：</p>
                            <ol class="list-decimal list-inside space-y-2 text-gray-700 mb-4">
                                <li>右键点击 {{ .Site.Params.app.name }} 应用，选择"打开"</li>
                                <li>在弹出的对话框中点击"打开"</li>
                                <li>或者进入"系统偏好设置" > "安全性与隐私" > "通用"，点击"仍要打开"</li>
                            </ol>
                            <p class="font-semibold text-gray-900 mb-2">对于 Apple Silicon Mac：</p>
                            <ul class="list-disc list-inside space-y-1 text-gray-700">
                                <li>确保下载的是 Apple Silicon 版本</li>
                                <li>如果仍有问题，可以在终端中运行：<code class="bg-gray-100 text-gray-900 px-2 py-1 rounded text-sm font-mono">sudo xattr -rd com.apple.quarantine /Applications/HiddifyNext.app</code></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 连接问题 -->
            <div class="mb-16 faq-section" data-category="connection">
                <h2 class="flex items-center gap-4 text-2xl md:text-3xl font-bold text-gray-900 mb-8 pb-4 border-b-2 border-gray-200">
                    <span class="text-4xl">🌐</span>
                    连接问题
                </h2>

                <div class="bg-white border border-gray-200 rounded-lg mb-4 overflow-hidden transition-all duration-300 hover:shadow-md faq-item" data-category="connection">
                    <div class="p-6 cursor-pointer flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition-colors duration-300 faq-question">
                        <h3 class="m-0 font-semibold flex-1 pr-4">连接成功但无法上网怎么办？</h3>
                        <span class="text-2xl font-bold text-gray-500 w-8 h-8 flex items-center justify-center rounded-full bg-gray-200 transition-all duration-300 toggle-icon">+</span>
                    </div>
                    <div class="max-h-0 overflow-hidden transition-all duration-300 bg-white faq-answer">
                        <div class="p-6">
                            <p class="text-gray-700 leading-relaxed mb-4">请按以下步骤排查：</p>
                            <ol class="list-decimal list-inside space-y-2 text-gray-700 mb-4">
                                <li><strong>检查订阅状态：</strong>确认您的订阅是否过期或流量是否用完</li>
                                <li><strong>切换节点：</strong>尝试连接其他服务器节点</li>
                                <li><strong>测试延迟：</strong>进行延迟测试，选择延迟较低的节点</li>
                                <li><strong>检查系统代理：</strong>确认系统代理设置是否正确</li>
                                <li><strong>重启应用：</strong>完全关闭并重新启动 {{ .Site.Params.app.name }}</li>
                                <li><strong>检查防火墙：</strong>确保防火墙没有阻止应用的网络访问</li>
                            </ol>
                            <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-r-lg">
                                <p class="text-yellow-700 m-0"><strong>注意：</strong>如果所有节点都无法使用，请联系您的服务提供商确认服务状态。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 联系支持 -->
        <div class="mt-16">
            <div class="bg-gradient-to-br from-blue-500 via-purple-600 to-purple-700 text-white p-12 rounded-3xl text-center shadow-2xl">
                <h3 class="text-2xl md:text-3xl font-bold mb-4">🤝 还没找到解决方案？</h3>
                <p class="text-lg md:text-xl mb-8 opacity-90 leading-relaxed">如果以上答案没有解决您的问题，您可以：</p>
                <div class="grid md:grid-cols-3 gap-6 mt-8">
                    <a href="/guides/" class="flex items-center gap-4 p-6 bg-white/10 border border-white/20 rounded-2xl no-underline text-white transition-all duration-300 hover:bg-white/20 hover:border-white/30 hover:-translate-y-1 backdrop-blur-lg">
                        <span class="text-3xl flex-shrink-0">📚</span>
                        <div class="text-left">
                            <h4 class="text-white text-lg font-semibold mb-1">查看详细教程</h4>
                            <p class="text-white/80 text-sm m-0">浏览我们的完整教程库</p>
                        </div>
                    </a>
                    <a href="{{ .Site.Params.contact.github_issues }}" class="flex items-center gap-4 p-6 bg-white/10 border border-white/20 rounded-2xl no-underline text-white transition-all duration-300 hover:bg-white/20 hover:border-white/30 hover:-translate-y-1 backdrop-blur-lg" target="_blank">
                        <span class="text-3xl flex-shrink-0">🐛</span>
                        <div class="text-left">
                            <h4 class="text-white text-lg font-semibold mb-1">报告问题</h4>
                            <p class="text-white/80 text-sm m-0">在 GitHub 上提交问题报告</p>
                        </div>
                    </a>
                    <a href="/about/" class="flex items-center gap-4 p-6 bg-white/10 border border-white/20 rounded-2xl no-underline text-white transition-all duration-300 hover:bg-white/20 hover:border-white/30 hover:-translate-y-1 backdrop-blur-lg">
                        <span class="text-3xl flex-shrink-0">📧</span>
                        <div class="text-left">
                            <h4 class="text-white text-lg font-semibold mb-1">联系我们</h4>
                            <p class="text-white/80 text-sm m-0">通过邮件获取帮助</p>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <!-- 自定义内容 -->
        <div class="prose prose-lg max-w-none mx-auto bg-white rounded-2xl p-8 shadow-lg border border-gray-100">
            {{ .Content }}
        </div>
    </div>
</div>
{{ end }}

{{ define "scripts" }}
{{ $faqScript := resources.Get "js/faq.js" | resources.Minify }}
<script src="{{ $faqScript.Permalink }}"></script>
{{ end }}